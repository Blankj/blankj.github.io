---
title: KMP模式匹配
date: 2015-07-18 02:02:41
categories:
  - DataStructure
tags:
  - 串
---

### 题目描述

输入一个主串和一个子串，若匹配成功，则找出匹配的趟数和在子串在主串中的位置，若匹配不成功，则输出0

<!-- more -->
### 输入要求

输入两个字符串

### 输出要求

输出匹配的趟数和位置

### 假如输入

<pre>ababcabcacbab
abcac</pre>

### 应当输出

<pre>3 6</pre>

Code：

今天好好地理解了kmp算法，物超所值。

``` cpp
#include<bits/stdc++.h>
using namespace std;
void getnext(char str[],int next[])
{
    int i=0,j=-1;
    next[0]=-1;
    int len=strlen(str);
    while(i<len-1)
    {
        if(j==-1||str[i]==str[j])
        {
            ++i;
            ++j;            
            next[i]=j;
        }
        else
            j=next[j];
    }
}
void kmp(char str[],char substr[],int next[],int &times,int &pos)
{
    int len1=strlen(str);
    int len2=strlen(substr);
    int i=0,j=0;
    times=1;
    getnext(substr,next);
    while(i<len1&&j<len2)
    {
        if(j==-1||str[i]==substr[j])
        {
            ++i;
            ++j;
        }
        else
        {
            j=next[j];        
            ++times;
        }
    }
    if(len2==j)
        pos=i-j;
    else
        times=0;
}
int main()
{
    char str[100],substr[100];
    gets(str);
    gets(substr);
    int next[100];
    int pos,times;
    kmp(str,substr,next,times,pos);
    if(times)
        cout<<times<<" "<<pos+1;
    else
        cout<<0;
    return 0;
}
```